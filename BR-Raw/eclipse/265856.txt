[Viewers] TreeViewer Widget Dispose Error

Fix from bug 253956 has not been applied to HEAD yet. (This is why we need to verify bug fixes...) +++ This bug was initially created as a clone of Bug #253956 +++ Build ID: M20080221-1800 Steps To Reproduce: 1. 2. 3. More information: It is not possible to delete the current node without getting an error message when the tree is refreshed. To work around this my application selects a new node before deleting the currently selected node. This works most of the time, but occasionally a Widget is disposed exception is thrown. I believe this happens because the selection is handled asynchronously and is sometimes performed after the refresh. The work around is to perform the refresh asynchronously. I believe the proper solution would be for the org.eclipse.jface.viewers.SWTFocusCellManager.handleSelection(Event) to check event.item to see if the widget is disposed. The exception is being thrown by the following line in handle selection. ViewerRow row = viewer.getViewerRowFromItem(event.item); I have not attached code to reproduce this problem because it is random, and possibly system dependent.