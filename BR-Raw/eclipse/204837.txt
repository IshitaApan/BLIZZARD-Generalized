[CommonNavigator] commonWizard with no pages displays empty dialog

Build ID: I20070625-1500 Steps To Reproduce: Create a Navigator context menu item for New->Untitled Text File, by adding the following to your plugin.xml: <extension point="org.eclipse.ui.navigator.navigatorContent"> <commonWizard type="new" wizardId="org.eclipse.ui.editors.wizards.UntitledTextFileWizard"> <enablement> <adapt type="org.eclipse.core.resources.IResource" /> </enablement> </commonWizard> </extension> This wizard does not have any pages. However, when you select it from the Navigator context menu, you will get an empty dialog with just Finish and Cancel buttons. This wizard works fine (the dialog is not displayed) when used from the main File->New menu. This is similar to bug 177468, which was the same problem but with wizards within Cheat Sheets. Here, the problem is within org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction. In the run() method, just after the call to wizard.init(), but before the window.getShell(), we need to have: if (descriptor.canFinishEarly() && !descriptor.hasPages()) { wizard.performFinish(); return; } I have tested the above fix against the 3.3 (I20070625-1500) build and it works correctly.