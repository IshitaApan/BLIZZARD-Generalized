[Contributions] extended popup menu item with <visibleWhen> attribute will disappear when right click multiple times.

Created attachment 125604 The example project Build ID: M20080911-1700 Steps To Reproduce: 1. Create a RCP application with a TableView 2. Extend menu item through "org.eclipse.ui.menus" extention 3. Add <visibleWhen> attribute to the menu item 4. Launch the application, right click in the table view, the popup menu will appear with the extended item 5. right click again when the menu is showing. The menu will show again but the item disappears. More information: 1. The code added to the plugin.xml <extension point="org.eclipse.ui.menus"> <menuContribution locationURI="popup:Table.view?after=additions"> <command commandId="Table.commands.sampleCommand" label="open" icon="icons/sample.gif" id="Table.toolbars.sampleCommand" tooltip="Say hello world"> <visibleWhen> <with variable="activeMenuSelection"> <iterate> <adapt type="java.lang.Object"/> </iterate> </with> </visibleWhen> </command> </menuContribution> </extension> 2. The code added to Table.view.createPartControl 		MenuManager menuMgr = new MenuManager(); 		menuMgr.add(new GroupMarker(IWorkbenchActionConstants.MB_ADDITIONS)); 		getSite().registerContextMenu(menuMgr, viewer); 		Control control = viewer.getControl(); 		Menu menu = menuMgr.createContextMenu(control); 		control.setMenu(menu);