AbstractUIPlugin.imageDescriptorFromPlugin(...) does not correctly handle URIs of form "platform:/plugin/<plug-in ID>/$nl$"

Created attachment 223986 proposed patch Lots of code calls AbstractUIPlugin.imageDescriptorFromPlugin(...) passing in the plug-in ID and image file path taken directly from an IConfigurationElement. For example, WorkbenchWizardElement.getImageDescriptor() uses the icon specified in an extension to the extension point org.eclipse.ui.newWizards/wizard. The method imageDescriptorFromPlugin(...) tries to resolve the image file path relative to the specified plug-in and, if that fails, simply converts the image file path to a URL. This skips over the parsing for embedded variables ("$nl$", "$os$", etc.). As a result, if an icon is specified with a embedded variable (e.g. "platform:/plugin/org.eclipse.jpt.jpa.ui/$nl$/images/buttons/new-jpa-file.gif"), it will not be found; resulting in a logged DeviceResourceException at runtime. The attached patch changes AbstractUIPlugin.imageDescriptorFromPlugin(...) to call FileLocator.find(URL) to see whether the specified image path is of the form "platform:/..." and uses the resulting, correctly parsed, URL if it is. Note the PDE plugin.xml editor resolves a "fully-qualified" icon path that has embedded variables without a problem (e.g. in the wizard extension mentioned above).