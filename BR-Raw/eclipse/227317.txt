[Perspectives] [WorkbenchParts] Fast view on startup causes view ref count to be 2 instead of 1

I20080416-0800. A fast view that is activated (made visible) is not disposed on close. The reason for this is that the ref count for the view is 2 after startup. Test Case: 1. start fresh workspace 2. close all views except one (e.g. Navigator) 3. make last view a fast view 4. exit 5. start 6. make fast view visible 7. close it (click on [x]) ==> the view is not disposed You can also add a breakpoint to ViewFactory.createView(String, String) to see that the same view is created twice. This might be the reason for bug 226217. Proposed Fix (I am not expert in this area, so review carefully ;-) In Perspective.restoreFastView(IMemento, MultiStatus) replace IViewReference viewRef = getViewReference(viewID, secondaryId); with IViewReference viewRef = viewFactory.getView(viewID, secondaryId); NOTE: use the field 'viewFactory' and not the class 'ViewFactory' Reason: all view refs have already been restored and created via memento before, so no need to create it again when restoring the fast view.