[Compatibility] Automatically close editors when they cannot be persisted

While this doesn't fix the problem displayed by bug 329358, as its cause is still unknown, the code for persisting the editor and saving the memento should be made more robust and to also report on any failures that may have occurred so that the editor can be closed during the shutdown process.