NoClassDefFoundError in StandardPropertiesAdapterFactory due to unguarded access to optional type

Build: 4.2.2 Although org.eclipse.ui.ide has an optional dependency on org.eclipse.ui.views, org.eclipse.ui.internal.ide.model.StandardPropertiesAdapterFactory#getAdapterList() makes an unguarded reference to org.eclipse.ui.views.properties.IPropertySource resulting in the following exception. !ENTRY org.eclipse.jface 4 2 2013-02-08 15:31:43.682 !MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jface". !STACK 0 java.lang.NoClassDefFoundError: org.eclipse.ui.views.properties.IPropertySource 	at org.eclipse.ui.internal.ide.model.StandardPropertiesAdapterFactory.getAdapterList(StandardPropertiesAdapterFactory.java:47) 	at org.eclipse.core.internal.runtime.AdapterManager.addFactoriesFor(AdapterManager.java:111) 	at org.eclipse.core.internal.runtime.AdapterManager.getFactories(AdapterManager.java:211) 	at org.eclipse.core.internal.runtime.AdapterManager.getAdapter(AdapterManager.java:292) 	at org.eclipse.core.runtime.PlatformObject.getAdapter(PlatformObject.java:66) 	at org.eclipse.ui.internal.util.Util.getAdapter(Util.java:110) 	at org.eclipse.ui.model.WorkbenchLabelProvider.getAdapter(WorkbenchLabelProvider.java:136) 	at org.eclipse.ui.model.WorkbenchLabelProvider.getText(WorkbenchLabelProvider.java:246) 	at org.eclipse.jface.viewers.DecoratingLabelProvider.getText(DecoratingLabelProvider.java:129) 	at org.eclipse.jface.viewers.DecoratingLabelProvider.updateLabel(DecoratingLabelProvider.java:351) 	at org.eclipse.jface.viewers.WrappedViewerLabelProvider.update(WrappedViewerLabelProvider.java:183) 	at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:152) 	at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:953) 	at org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(AbstractTreeViewer.java:113) 	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) 	at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49) 	at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175) 	at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:1033) 	at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:485) 	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) 	at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49) 	at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175) 	at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2167) 	at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:848) 	at org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:823) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) 	at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:797) 	at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:644) 	at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:768) 	at org.eclipse.jface.viewers.AbstractTreeViewer.internalInitializeTree(AbstractTreeViewer.java:1548) 	at org.eclipse.jface.viewers.TreeViewer.internalInitializeTree(TreeViewer.java:833) 	at org.eclipse.jface.viewers.AbstractTreeViewer$5.run(AbstractTreeViewer.java:1532) 	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1443) 	at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:403) 	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1404) 	at org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged(AbstractTreeViewer.java:1525) 	at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280) 	at org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1690) 	at org.eclipse.ui.internal.ide.misc.ContainerSelectionGroup.createTreeViewer(ContainerSelectionGroup.java:296) 	at org.eclipse.ui.internal.ide.misc.ContainerSelectionGroup.createContents(ContainerSelectionGroup.java:241) 	at org.eclipse.ui.internal.ide.misc.ContainerSelectionGroup.<init>(ContainerSelectionGroup.java:166) 	at org.eclipse.ui.internal.ide.misc.ResourceAndContainerGroup.createContents(ResourceAndContainerGroup.java:226) 	at org.eclipse.ui.internal.ide.misc.ResourceAndContainerGroup.<init>(ResourceAndContainerGroup.java:184) 	at org.eclipse.ui.dialogs.WizardNewFileCreationPage.createControl(WizardNewFileCreationPage.java:245) 	at org.eclipse.jface.wizard.Wizard.createPageControls(Wizard.java:174) 	at org.eclipse.jface.wizard.WizardDialog.createPageControls(WizardDialog.java:736) 	at org.eclipse.jface.wizard.WizardDialog.createContents(WizardDialog.java:608) 	at org.eclipse.jface.window.Window.create(Window.java:431) 	at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1104) 	at org.eclipse.ui.internal.actions.NewWizardShortcutAction.run(NewWizardShortcutAction.java:122) 	at org.eclipse.jface.action.Action.runWithEvent(Action.java:499) 	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584) 	at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501) 	at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1392) 	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3705) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3326) 	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1057) 	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:941) 	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:79) 	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588) 	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124) 	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:616) 	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636) 	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591) 	at org.eclipse.equinox.launcher.Main.run(Main.java:1450) 	at org.eclipse.equinox.launcher.Main.main(Main.java:1426)