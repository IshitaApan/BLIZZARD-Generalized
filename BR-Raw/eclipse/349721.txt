[Compatibility] Compare editors cannot be opened from EGit's 'Git Staging' view

When double-clicking on files in the 'Git Staging' view, the compare editor does not open. We are returning UNDEFINED_VARIABLE when the handler tries to ask the context for a selection. Please refer to line 803 and down. http://egit.eclipse.org/w/?p=egit.git;a=blob;f=org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/staging/StagingView.java;h=b59dcbfe9a65bb7b496c5369fc3b40d1db49f627;hb=HEAD Thread [main] (Suspended)	 	ExpressionContext.getVariable(String) line: 116	 	EvaluationContext.getVariable(String) line: 145	 	CompareWithIndexActionHandler(RepositoryActionHandler).convertSelection(IEvaluationContext, Object) line: 327	 	CompareWithIndexActionHandler(RepositoryActionHandler).getSelection() line: 315	 	CompareWithIndexActionHandler(RepositoryActionHandler).getRepository() line: 211	 	CompareWithIndexActionHandler.isEnabled() line: 170	 	HandlerProxy.isEnabled() line: 320	 	E4HandlerProxy.canExecute(IEclipseContext, IEvaluationContext) line: 53	 	GeneratedMethodAccessor3.invoke(Object, Object[]) line: not available	 	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: not available	 	Method.invoke(Object, Object...) line: not available	 	MethodRequestor.execute() line: 56	 	InjectorImpl.invokeUsingClass(Object, Class<?>, Class<Annotation>, Object, PrimaryObjectSupplier, PrimaryObjectSupplier, boolean) line: 226	 	InjectorImpl.invoke(Object, Class<Annotation>, Object, PrimaryObjectSupplier, PrimaryObjectSupplier) line: 207	 	ContextInjectionFactory.invoke(Object, Class<Annotation>, IEclipseContext, IEclipseContext, Object) line: 123	 	HandlerServiceImpl.executeHandler(ParameterizedCommand, IEclipseContext) line: 138	 	LegacyHandlerService.executeCommandInContext(ParameterizedCommand, Event, IEvaluationContext) line: 487	 	StagingView.runCommand(String, IStructuredSelection) line: 830