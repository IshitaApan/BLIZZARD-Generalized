[Contributions] WorkbenchMenuService calling Display.syncExec() on disposed Display

bug 269172 attachment 144102 +++ This bug was initially created as a clone of Bug #269172 +++ (copied from eclipse.platform.rcp newsgroup) This is a problem i stumbled upon in one of my JUnit tests: In some of my tests I create temporary extensions via the ExtensionRegistry service. These extensions are removed after all tests have run. The ExtensionRegistry then fires a fireRegistryChangedEvent() that triggers the IRegistryChangeListener of WorkbenchMenuService to call Display.syncExec(). Unfortunately, the display may already be disposed at that point in time (it's most likely a race condition between the test thread and the thread performing the registry change notifications). Solution that i would suggest: The WorkbenchMenuService should check if the display is disposed before calling Display.syncExec(). Marcel