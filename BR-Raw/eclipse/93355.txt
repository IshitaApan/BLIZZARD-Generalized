[Perspectives] NPE in CustomizePerspectiveDialog

Happens when you have an RCP app with no action sets defined. Create a "Hello RCP" app with PDE tooling. add configurer.setShowPerspectiveBar(true); to ApplicationWorkbenchWindowAdvisor#preWindowOpen Start app. Invoke "Customize..." from coolbar. @@@@@ !ENTRY org.eclipse.ui 4 0 2005-04-30 22:15:58.612 !MESSAGE null argument; !STACK 0 org.eclipse.jface.util.Assert$AssertionFailedException: null argument; 	at org.eclipse.jface.util.Assert.isNotNull(Assert.java:149) 	at org.eclipse.jface.util.Assert.isNotNull(Assert.java:125) 	at org.eclipse.jface.viewers.StructuredSelection.<init>(StructuredSelection.java:66) 	at org.eclipse.ui.internal.dialogs.CustomizePerspectiveDialog.setInitialSelections(CustomizePerspectiveDialog.java:1772) 	at org.eclipse.ui.internal.dialogs.CustomizePerspectiveDialog.createDialogArea(CustomizePerspectiveDialog.java:1186) 	at org.eclipse.jface.dialogs.Dialog.createContents(Dialog.java:687) 	at org.eclipse.jface.window.Window.create(Window.java:418) 	at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:996) 	at org.eclipse.jface.window.Window.open(Window.java:770) 	at org.eclipse.ui.internal.WorkbenchPage.editActionSets(WorkbenchPage.java:1462) 	at org.eclipse.ui.internal.EditActionSetsAction.run(EditActionSetsAction.java:49) 	at org.eclipse.ui.internal.PerspectiveAction.run(PerspectiveAction.java:70) 	at org.eclipse.ui.internal.PerspectiveSwitcher$14.widgetSelected(PerspectiveSwitcher.java:1089) 	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842) 	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2900) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2533) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1569) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1533) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143) 	at de.sdavids.ui.internal.application.Application.run(Application.java:13) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:345) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:158) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 	at java.lang.reflect.Method.invoke(Unknown Source) 	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:319) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:272) 	at org.eclipse.core.launcher.Main.run(Main.java:951) 	at org.eclipse.core.launcher.Main.main(Main.java:935) @@@@ Version: 3.1.0 Build id: I20050426-1700