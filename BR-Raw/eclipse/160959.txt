[EFS] IDE.openEditor fails to open system editors for links referencing non-local IFileStore URIs

When opening an external editor, ExternalEditor calls IFileEditorInput.getPath(). This API calls file.getLocation() which (in Eclipse 3.2) returns null for IFiles that are not stored on the local filesystem. (see http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.isv/porting/3.2/incompatibilities.html) To reproduce this: 1) Install a non-local filesystem EFS extension. The example below uses the HTTP IFileStore implementation listed at http://wiki.eclipse.org/index.php/EFS#HTTP 2) Create a project with the following descriptor (.project file): <?xml version="1.0" encoding="UTF-8"?> <projectDescription> 	<name>linktest</name> 	<comment></comment> 	<projects> 	</projects> 	<buildSpec> 	</buildSpec> 	<natures> 	</natures> 	<linkedResources> 		<link> 			<name>index.html</name> 			<type>1</type> 			<locationURI>http://www.eclipse.com/index.html</locationURI> 		</link> 	</linkedResources> </projectDescription> 3) Try to open the index.html link file (double-click). The IDE tries to launch the system editor and fails with a NullPointerException (dialog). The ErrorLog contains the following stack trace: java.lang.NullPointerException 	at org.eclipse.ui.internal.browser.BrowserLauncher.open(BrowserLauncher.java:33) 	at org.eclipse.ui.internal.EditorManager$3.run(EditorManager.java:743) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67) 	at org.eclipse.ui.internal.EditorManager.openExternalEditor(EditorManager.java:736) 	at org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:710) 	at org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:680) 	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2593) 	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2528) 	at org.eclipse.ui.internal.WorkbenchPage.access$10(WorkbenchPage.java:2520) 	at org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2505) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67) 	at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2500) 	at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2485) 	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:388) 	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:350) <snip> The actual source of the failure is, I believe, at. Thread [main] (Suspended)	 	org.eclipse.ui.part.FileEditorInput.getPath() line: 154	 	org.eclipse.ui.internal.EditorManager$3.run() line: 744	 	org.eclipse.swt.custom.BusyIndicator.showWhile(org.eclipse.swt.widgets.Display, java.lang.Runnable) line: 67	 	org.eclipse.ui.internal.EditorManager.openExternalEditor(org.eclipse.ui.internal.registry.EditorDescriptor, org.eclipse.ui.IEditorInput) line: 736	 	org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(org.eclipse.ui.internal.registry.EditorDescriptor, org.eclipse.ui.IEditorInput) line: 710	 	org.eclipse.ui.internal.EditorManager.openEditor(java.lang.String, org.eclipse.ui.IEditorInput, boolean) line: 680	 	org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(org.eclipse.ui.IEditorInput, java.lang.String, boolean, int) line: 2593	 	org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(org.eclipse.ui.IEditorInput, java.lang.String, boolean, int) line: 2528	 <snip>