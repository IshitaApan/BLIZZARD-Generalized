NPE in PartStack on shutdown

When you shutdown Eclipse self hosted from HEAD (20040514 with platform-ui loaded on 20040517) you will get the exception below 1) Start Eclipse 2) Load platform-ui from HEAD 3) run self hosted 4) load platform-ui in the self hosted image 5) shut down Exception: java.lang.NullPointerException 	at org.eclipse.ui.internal.PartStack.saveState(PartStack.java:838) 	at org.eclipse.ui.internal.ViewSashContainer.saveState (ViewSashContainer.java:197) 	at org.eclipse.ui.internal.PerspectiveHelper.saveState (PerspectiveHelper.java:1172) 	at org.eclipse.ui.internal.Perspective.saveState(Perspective.java:1275) 	at org.eclipse.ui.internal.Perspective.saveState(Perspective.java:1146) 	at org.eclipse.ui.internal.WorkbenchPage.saveState (WorkbenchPage.java:2573) 	at org.eclipse.ui.internal.WorkbenchWindow.saveState (WorkbenchWindow.java:1846) 	at org.eclipse.ui.internal.Workbench.saveState(Workbench.java:1386) 	at org.eclipse.ui.internal.Workbench.recordWorkbenchState (Workbench.java:1163) 	at org.eclipse.ui.internal.Workbench.access$5(Workbench.java:1161) 	at org.eclipse.ui.internal.Workbench$9.run(Workbench.java:435) 	at org.eclipse.core.internal.runtime.InternalPlatform.run (InternalPlatform.java:607) 	at org.eclipse.core.runtime.Platform.run(Platform.java:668) 	at org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:433) 	at org.eclipse.ui.internal.Workbench.access$8(Workbench.java:399) 	at org.eclipse.ui.internal.Workbench$12.run(Workbench.java:571) 	at org.eclipse.swt.custom.BusyIndicator.showWhile (BusyIndicator.java:69) 	at org.eclipse.ui.internal.Workbench.close(Workbench.java:569) 	at org.eclipse.ui.internal.Workbench.close(Workbench.java:545) 	at org.eclipse.ui.internal.QuitAction.run(QuitAction.java:55) 	at org.eclipse.jface.action.Action.runWithEvent(Action.java:881) 	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection (ActionContributionItem.java:899) 	at org.eclipse.jface.action.ActionContributionItem.access$2 (ActionContributionItem.java:850) 	at org.eclipse.jface.action.ActionContributionItem$7.handleEvent (ActionContributionItem.java:769) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796) 	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench (Workbench.java:253) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141) 	at org.eclipse.ui.internal.ide.IDEApplication.run (IDEApplication.java:97) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run (PlatformActivator.java:298) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run (EclipseStarter.java:249) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run (EclipseStarter.java:126) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:324) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:269) 	at org.eclipse.core.launcher.Main.run(Main.java:722) 	at org.eclipse.core.launcher.Main.main(Main.java:706)