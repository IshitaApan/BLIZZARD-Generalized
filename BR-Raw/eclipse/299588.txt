[Forms] Widget disposed exception when closing shell from a FormText selection

I was trying to reproduce bug 280665 when I hit this. Since the stack trace is different I presume it's a different bug. 1. Run the code below. 2. Click the link with the mouse. 3. Exception is thrown. Display display = new Display(); final Shell shell = new Shell(); shell.setSize(400, 300); shell.setLayout(new FillLayout()); FormText text = new FormText(shell, SWT.SINGLE); text.setText("<p>http://www.eclipse.org</p>", true, true); text.addSelectionListener(new SelectionAdapter() { 	@Override 	public void widgetSelected(SelectionEvent e) { 		shell.close(); 	} }); shell.open(); while (!shell.isDisposed()) { 	if (!display.readAndDispatch()) { 		display.sleep(); 	} } display.dispose(); Exception in thread "main" org.eclipse.swt.SWTException: Widget is disposed 	at org.eclipse.swt.SWT.error(SWT.java:4068) 	at org.eclipse.swt.SWT.error(SWT.java:3983) 	at org.eclipse.swt.SWT.error(SWT.java:3954) 	at org.eclipse.swt.widgets.Widget.error(Widget.java:467) 	at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:340) 	at org.eclipse.swt.widgets.Control.getAccessible(Control.java:1026) 	at org.eclipse.ui.forms.widgets.FormText.notifySelectionChanged(FormText.java:1309) 	at org.eclipse.ui.forms.widgets.FormText.endSelection(FormText.java:1277) 	at org.eclipse.ui.forms.widgets.FormText.handleMouseClick(FormText.java:1347) 	at org.eclipse.ui.forms.widgets.FormText.access$16(FormText.java:1323) 	at org.eclipse.ui.forms.widgets.FormText$6.mouseUp(FormText.java:448) 	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:207)