[Preferences] Preferences dialog fails to create hierarchy if category referenced before declared

I20080327-2251 The issue reported in bug 224566 turned out to be a regression in the platform. The tk.eclipse.plugin.htmleditor (2.0.5.1) plug-in contributes preference pages like this: <extension point="org.eclipse.ui.preferencePages"> <page class="tk.eclipse.plugin.htmleditor.HTMLEditorPreferencePage" name="%plugin.preference.category" id="tk.eclipse.plugin.htmleditor.category"/> <page class="tk.eclipse.plugin.htmleditor.CustomAssistPreferencePage" category= "tk.eclipse.plugin.htmleditor.category/tk.eclipse.plugin.htmleditor.AssistPreferencePage" name="%plugin.preference.customassist" id="tk.eclipse.plugin.htmleditor.CustomAssistPreferencePage"/> <page class="tk.eclipse.plugin.htmleditor.AssistPreferencePage" category="tk.eclipse.plugin.htmleditor.category" name="%plugin.preference.codeassist" id="tk.eclipse.plugin.htmleditor.AssistPreferencePage"/> This works fine in 3.4M5 ("tk.eclipse.plugin.htmleditor.CustomAssistPreferencePage" shows up inside "tk.eclipse.plugin.htmleditor.AssistPreferencePage"), but it fails in the current build with the CustomAssistPreferencePage showing up as top-level preference page and this log entry: !ENTRY org.eclipse.ui 4 4 2008-03-28 12:06:57.921 !MESSAGE Invalid preference page path: Amateras/Code Assist/Custom Assist