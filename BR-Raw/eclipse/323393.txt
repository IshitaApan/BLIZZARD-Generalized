[Contributions] Service initialization wrong! Sources must be initialized before Handlers

+++ This bug was initially created as a clone of Bug #316701 +++ The initialization of services in the Workbench has been reworked in in 3.6 compared with 3.5 Unfortunately source providers (initialized in Workbench.startSourceProviders()) are now initialized *after* handlers (in Workbench.initializeDefaultServices()). The result is that a handler with an activeWhen expression which refers to a source variable _other_ that the built-in variables from SourcePriorityNameMapping, will get source priority 0 - same as if it does not have an expression. Which is wrong, if the used variables have priorities installed via the extension point org.eclipse.ui.services/sourceProvider/variable. This is a blocking issues for RCP applications, as far as I can see, as later execution of the command results in no active handler! I cannot say, why the change was made between 3.5 and 3.6 - quite deliberate as seen from comments in workbench.java - so I cannot guess on a fix... -- Configuration Details -- Product: Eclipse 1.3.0.20100526-1137 (org.eclipse.epp.package.rcp.product) Installed Features: org.eclipse.platform 3.6.0.v20100527-9gF78GpqFt6trOGhCMC-p4sxjlLvz0FU_i