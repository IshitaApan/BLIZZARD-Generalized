[Contributions] Toolbar painting issues when a command is contributed to the menu

Created attachment 117965 Screenshot. We are contributing a refresh command to the view toolbar with the following extension, and we have a refresh handler which is activated based on active part. <menuContribution locationURI="toolbar:org.eclipse.debug.ui.DebugView?after=additions"> <command commandId="org.eclipse.ui.file.refresh" 	 icon="icons/refresh.gif" style="push" label="%command.refresh.name"> <visibleWhen checkEnabled="false"> <reference definitionId="org.eclipse.dd.dsf.debug.ui.testIsUpdateModesActionSetActive"/> </visibleWhen> </command> </menuContribution> One of our users reported a strange painting issue, where the whole view toolbar does not refresh when switching from another application (on Windows XP SP2). If the view is resized then the toolbar finally repaints. Also, if the action set which enables this contribution is turned, off the toolbars again paint correctly. Unfortunately we have only seen this happen on this one system, but I hope that there is some rational explanation to this. This is an end-user's system and doesn't have a debugger on it, but even if I could debug on it I wouldn't know where to start. BTW, there's no exceptions in the log either.