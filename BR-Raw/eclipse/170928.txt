[DataBinding] ValidationStatusMap Problem

Build: RCP SDK 3.3M4, databinding plugins from CVS at 17-Jan-2007 If I create a new DataBindingContext, add some bindings to it, and finally add a ValidationStatusMap listener, the listener receives no events as the validation status changes. If, on the other hand, I add the listener first and then add the bindings, things work as expected. I have created a JUnit test for the situation, available as the attachment of my newsgroup post at eclipse.platform (Message-ID: <eond42$gco$1@utils.eclipse.org>). Here are the main points. This way the things work properly: ... create SWT controls ... m_ctx = new DataBindingContext(); m_ctx.getValidationStatusMap().addMapChangeListener(m_validationListener); final FormBean formBean = new FormBean(); m_ctx.bindValue( observeText(m_textField1 , SWT.FocusOut), observeValue(formBean, "field1"), new DefaultBindSpec().setTargetValidator(new FlipFlopValidator()) ); ... more bindings ... And this way they don't: ... create SWT controls ... m_ctx = new DataBindingContext(); final FormBean formBean = new FormBean(); m_ctx.bindValue( observeText(m_textField1 , SWT.FocusOut), observeValue(formBean, "field1"), new DefaultBindSpec().setTargetValidator(new FlipFlopValidator()) ); ... more bindings ... m_ctx.getValidationStatusMap().addMapChangeListener(m_validationListener);