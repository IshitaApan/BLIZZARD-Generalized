UI scheduling strategy causes injections to be delayed

Created attachment 156020 Scheduler problem tests patch In 3.x, we have some simple sanity tests like the following: IWorkbenchPart part = page.showView(IPageLayout.ID_OUTLINE); assertEquals(part, page.getActivePart()); When I try to implement this in the compatibility layer, it does not work. Initially, I thought it was a bug in EPartService (bug 295003) but I have discovered that it is because the scheduled notifications have not been run so reinjection hasn't happened. Since I might not be making a lot of sense, please use the attached patch to see the problem in pure e4 code. I am marking this as major because it is an architectural issue that we need to have an answer for. It does not make sense for client code to be spinning the event loop.