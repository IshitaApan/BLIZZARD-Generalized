[MPE] MultiPageEditorPart setFocus gives error if no pages

Created attachment 86370 stack trace at breakpoint before exception occurs Build ID: I20071213-1700 Steps To Reproduce: Using Eclipse 3.4 M4 1. Create a subclass of MultiPageEditorPart that does nothing for createPages. 2. Launch the editor 3. Note that an SWT error (Index out of bounds) is generated. (see attachment) 4. Try launching the same thing in Eclipse 3.2 or 3.3 - no error. More information: We've created a specialized subclass of MultiPageEditorPart that doesn't do anything directly in createPages. Document loading is delegated to a background thread, adding the pages is done after the background thread completes. The goal of this is to make the main UI appear faster and display progress while loading. This functionality was recently broken in rev 1.50 of MultiPageEditorPart (see http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.ui.workbench/Eclipse%20UI/org/eclipse/ui/part/MultiPageEditorPart.java?r1=1.49&r2=1.50 ) setFocus (int pageIndex) used to handle -1 (the index returned when there are no pages) by doing something else instead of actually trying to call getEditor. This case should still be handled properly.