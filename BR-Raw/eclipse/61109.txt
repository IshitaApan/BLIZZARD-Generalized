Widget is disposed error disposing shell

build I20040427 + latest UI and SWT from HEAD - ran target Eclipse - detached Navigator view - it was blank (gray) - clicked on it - its contents appeared - dragged it back - it was blank (gray) - clicked on it - the target exited unexpectedly - log has: !MESSAGE Widget is disposed !STACK 0 org.eclipse.swt.SWTException: Widget is disposed 	at org.eclipse.swt.SWT.error(SWT.java:2689) 	at org.eclipse.swt.SWT.error(SWT.java:2614) 	at org.eclipse.swt.SWT.error(SWT.java:2585) 	at org.eclipse.swt.widgets.Widget.error(Widget.java:381) 	at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283) 	at org.eclipse.swt.widgets.Menu.getParentMenu(Menu.java:813) 	at org.eclipse.swt.widgets.Decorations.releaseWidget(Decorations.java:690) 	at org.eclipse.swt.widgets.Shell.releaseWidget(Shell.java:785) 	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:368) 	at org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:371) 	at org.eclipse.swt.widgets.Shell.dispose(Shell.java:486) 	at org.eclipse.jface.window.Window.close(Window.java:253) 	at org.eclipse.ui.internal.DetachedWindow.close(DetachedWindow.java:80) 	at org.eclipse.ui.internal.PerspectivePresentation.derefPart(PerspectivePresentation.java:566) 	at org.eclipse.ui.internal.RootLayoutContainer.derefPart(RootLayoutContainer.java:269) 	at org.eclipse.ui.internal.PartSashContainer.stackPane(PartSashContainer.java:815) 	at org.eclipse.ui.internal.PartSashContainer.stack(PartSashContainer.java:793) 	at org.eclipse.ui.internal.PartSashContainer.dropObject(PartSashContainer.java:751) 	at org.eclipse.ui.internal.PartSashContainer$SashContainerDropTarget.drop(PartSashContainer.java:104) 	at org.eclipse.ui.internal.dnd.DragUtil.performDrag(DragUtil.java:128) 	at org.eclipse.ui.internal.PartStack.dragStart(PartStack.java:844) 	at org.eclipse.ui.internal.PartStack$1.dragStart(PartStack.java:61) 	at org.eclipse.ui.internal.presentations.BasicStackPresentation$11.handleEvent(BasicStackPresentation.java:311) 	at org.eclipse.ui.presentations.PresentationUtil.handleMouseMove(PresentationUtil.java:89) 	at org.eclipse.ui.presentations.PresentationUtil.access$4(PresentationUtil.java:83) 	at org.eclipse.ui.presentations.PresentationUtil$2.handleEvent(PresentationUtil.java:55) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796) 	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2594) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2272) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141) 	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:283) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:120) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:324) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:269) 	at org.eclipse.core.launcher.Main.run(Main.java:700) 	at org.eclipse.core.launcher.Main.main(Main.java:684) !ENTRY org.eclipse.ui 4 4 May 05, 2004 15:05:14.736 !MESSAGE Unhandled event loop exception !ENTRY org.eclipse.ui 4 0 May 05, 2004 15:05:14.746 !MESSAGE Cannot set text !STACK 0 org.eclipse.swt.SWTError: Cannot set text 	at org.eclipse.swt.SWT.error(SWT.java:2715) 	at org.eclipse.swt.SWT.error(SWT.java:2614) 	at org.eclipse.swt.SWT.error(SWT.java:2585) 	at org.eclipse.swt.widgets.Widget.error(Widget.java:381) 	at org.eclipse.swt.widgets.MenuItem.setText(MenuItem.java:949) 	at org.eclipse.jface.action.ActionContributionItem.update(ActionContributionItem.java:858) 	at org.eclipse.jface.action.ActionContributionItem$1.propertyChange(ActionContributionItem.java:182) 	at org.eclipse.ui.internal.commands.ws.CommandCallback$1.commandChanged(CommandCallback.java:91) 	at org.eclipse.ui.internal.commands.Command.fireCommandChanged(Command.java:138) 	at org.eclipse.ui.internal.commands.MutableCommandManager.notifyCommands(MutableCommandManager.java:366) 	at org.eclipse.ui.internal.commands.MutableCommandManager.setActiveContextIds(MutableCommandManager.java:557) 	at org.eclipse.ui.internal.commands.ws.WorkbenchCommandSupport.setActiveContextIds(WorkbenchCommandSupport.java:494) 	at org.eclipse.ui.internal.Workbench$2.contextManagerChanged(Workbench.java:1793) 	at org.eclipse.ui.internal.contexts.AbstractContextManager.fireContextManagerChanged(AbstractContextManager.java:46) 	at org.eclipse.ui.internal.contexts.ProxyContextManager$1.contextManagerChanged(ProxyContextManager.java:41) 	at org.eclipse.ui.internal.contexts.AbstractContextManager.fireContextManagerChanged(AbstractContextManager.java:46) 	at org.eclipse.ui.internal.contexts.MutableContextManager.setEnabledContextIds(MutableContextManager.java:310) 	at org.eclipse.ui.internal.contexts.ws.WorkbenchContextSupport.processEnabledSubmissions(WorkbenchContextSupport.java:557) 	at org.eclipse.ui.internal.contexts.ws.WorkbenchContextSupport.processEnabledSubmissions(WorkbenchContextSupport.java:384) 	at org.eclipse.ui.internal.contexts.ws.WorkbenchContextSupport.removeEnabledSubmissions(WorkbenchContextSupport.java:648) 	at org.eclipse.ui.internal.contexts.ws.WorkbenchContextSupport.checkWindowType(WorkbenchContextSupport.java:310) 	at org.eclipse.ui.internal.contexts.ws.WorkbenchContextSupport.access$0(WorkbenchContextSupport.java:294) 	at org.eclipse.ui.internal.contexts.ws.WorkbenchContextSupport$1.handleEvent(WorkbenchContextSupport.java:129) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82) 	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:705) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:795) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:820) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:801) 	at org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:1473) 	at org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1327) 	at org.eclipse.swt.widgets.Control.windowProc(Control.java:2949) 	at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1449) 	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3160) 	at org.eclipse.swt.internal.win32.OS.PeekMessageW(Native Method) 	at org.eclipse.swt.internal.win32.OS.PeekMessage(OS.java:1868) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2266) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141) 	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:283) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:120) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:324) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:269) 	at org.eclipse.core.launcher.Main.run(Main.java:700) 	at org.eclipse.core.launcher.Main.main(Main.java:684) !ENTRY org.eclipse.core.runtime 4 2 May 05, 2004 15:05:15.116 !MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.core.runtime". !STACK 0 org.eclipse.swt.SWTException: Widget is disposed 	at org.eclipse.swt.SWT.error(SWT.java:2689) 	at org.eclipse.swt.SWT.error(SWT.java:2614) 	at org.eclipse.swt.SWT.error(SWT.java:2585) 	at org.eclipse.swt.widgets.Widget.error(Widget.java:381) 	at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283) 	at org.eclipse.swt.widgets.Menu.getParentMenu(Menu.java:813) 	at org.eclipse.swt.widgets.Decorations.releaseWidget(Decorations.java:690) 	at org.eclipse.swt.widgets.Shell.releaseWidget(Shell.java:785) 	at org.eclipse.swt.widgets.Widget.releaseResources(Widget.java:673) 	at org.eclipse.swt.widgets.Shell.releaseShells(Shell.java:779) 	at org.eclipse.swt.widgets.Shell.releaseWidget(Shell.java:784) 	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:368) 	at org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:371) 	at org.eclipse.swt.widgets.Shell.dispose(Shell.java:486) 	at org.eclipse.jface.window.Window.close(Window.java:253) 	at org.eclipse.jface.window.ApplicationWindow.close(ApplicationWindow.java:272) 	at org.eclipse.ui.internal.WorkbenchWindow.hardClose(WorkbenchWindow.java:1043) 	at org.eclipse.ui.internal.WorkbenchWindow.busyClose(WorkbenchWindow.java:483) 	at org.eclipse.ui.internal.WorkbenchWindow.access$0(WorkbenchWindow.java:465) 	at org.eclipse.ui.internal.WorkbenchWindow$1.run(WorkbenchWindow.java:553) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84) 	at org.eclipse.ui.internal.WorkbenchWindow.close(WorkbenchWindow.java:551) 	at org.eclipse.jface.window.WindowManager.close(WindowManager.java:101) 	at org.eclipse.ui.internal.Workbench$10.run(Workbench.java:450) 	at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:604) 	at org.eclipse.core.runtime.Platform.run(Platform.java:545) 	at org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:447) 	at org.eclipse.ui.internal.Workbench.access$8(Workbench.java:389) 	at org.eclipse.ui.internal.Workbench$12.run(Workbench.java:561) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84) 	at org.eclipse.ui.internal.Workbench.close(Workbench.java:559) 	at org.eclipse.ui.internal.WorkbenchConfigurer.emergencyClose(WorkbenchConfigurer.java:150) 	at org.eclipse.ui.internal.ide.IDEExceptionHandler.closeWorkbench(IDEExceptionHandler.java:104) 	at org.eclipse.ui.internal.ide.IDEExceptionHandler.handleException(IDEExceptionHandler.java:84) 	at org.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.eventLoopException(IDEWorkbenchAdvisor.java:241) 	at org.eclipse.ui.internal.ExceptionHandler.handleException(ExceptionHandler.java:53) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1357) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141) 	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:283) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:120) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:324) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:269) 	at org.eclipse.core.launcher.Main.run(Main.java:700) 	at org.eclipse.core.launcher.Main.main(Main.java:684) !ENTRY org.eclipse.osgi May 05, 2004 15:05:15.537 !MESSAGE Application error !STACK 1 org.eclipse.swt.SWTException: Widget is disposed 	at org.eclipse.swt.SWT.error(SWT.java:2689) 	at org.eclipse.swt.SWT.error(SWT.java:2614) 	at org.eclipse.swt.SWT.error(SWT.java:2585) 	at org.eclipse.swt.widgets.Widget.error(Widget.java:381) 	at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283) 	at org.eclipse.swt.widgets.Menu.getParentMenu(Menu.java:813) 	at org.eclipse.swt.widgets.Decorations.releaseWidget(Decorations.java:690) 	at org.eclipse.swt.widgets.Shell.releaseWidget(Shell.java:785) 	at org.eclipse.swt.widgets.Widget.releaseResources(Widget.java:673) 	at org.eclipse.swt.widgets.Shell.releaseShells(Shell.java:779) 	at org.eclipse.swt.widgets.Shell.releaseWidget(Shell.java:784) 	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:368) 	at org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:371) 	at org.eclipse.swt.widgets.Shell.dispose(Shell.java:486) 	at org.eclipse.swt.widgets.Display.release(Display.java:2321) 	at org.eclipse.swt.graphics.Device.dispose(Device.java:227) 	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:99) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:283) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:120) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:324) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:269) 	at org.eclipse.core.launcher.Main.run(Main.java:700) 	at org.eclipse.core.launcher.Main.main(Main.java:684)