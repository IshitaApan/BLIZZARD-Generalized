[Workbench] NPE during startup at WorkbenchKeyboard.isPartialMatch

Build Identifier: M20080911-1700 It's possible to crash Eclipse during startup just by pressing keys while the splash screen is up. It seems that this class (potentially others?) has no handling for the case when the workbench isn't initialized yet, and is returning null for the bindingService. !SESSION 2010-05-18 13:00:07.804 ----------------------------------------------- eclipse.buildId=M20080911-1700 java.version=1.6.0_01 java.vendor=Sun Microsystems Inc. BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US Command-line arguments: -os win32 -ws win32 -arch x86 -clean !ENTRY org.eclipse.ui 4 0 2010-05-18 13:00:35.179 !MESSAGE Unhandled event loop exception !STACK 0 java.lang.NullPointerException 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.isPartialMatch(WorkbenchKeyboard.java:656) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:817) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:882) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:571) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:512) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:127) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1184) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1002) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1027) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1012) 	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1040) 	at org.eclipse.swt.widgets.Shell.sendKeyEvent(Shell.java:1290) 	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1036) 	at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1352) 	at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3894) 	at org.eclipse.swt.widgets.Canvas.WM_CHAR(Canvas.java:341) 	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3787) 	at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:337) 	at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1576) 	at org.eclipse.swt.widgets.Shell.windowProc(Shell.java:1937) 	at org.eclipse.swt.widgets.Display.windowProc(Display.java:4528) 	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method) 	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2371) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3420) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2293) 	at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2198) 	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:493) 	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:488) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113) 	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:193) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:386) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 	at java.lang.reflect.Method.invoke(Unknown Source) 	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:549) 	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:504) 	at org.eclipse.equinox.launcher.Main.run(Main.java:1236) Reproducible: Always Steps to Reproduce: 1. Start Eclipse, choose workspace if necessary 2. Start pressing buttons on the keyboard repeatedly (you only need to actually press it once at the right time, but it's easiest to reproduce by just pressing repeatedly) 3. Crashes - check workspace logs for the stack trace.