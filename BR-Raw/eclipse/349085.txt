[UI] Supply a regression test for the scenario(s) on bug 349076

Keeping the UI and context models in synch is integral to the proper operation of the UI; we need a test to ensure that this code doesn't regress.