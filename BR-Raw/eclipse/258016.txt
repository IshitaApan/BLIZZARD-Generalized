[PropertiesView] NPE in org.eclipse.ui.views.properties.PropertySheetViewer

At line 720. If the selection is null this will result in an NPE. Here is the offending code snippet: 714: // get the new selection 715: TreeItem[] sel = new TreeItem[] { selection }; 716: if (sel.length == 0) { 717: setMessage(null); 718: setErrorMessage(null); 719: } else { 720: Object object = sel[0].getData(); // assume single selection It would be better replaced with the following (sorry, no patch, I'm not set up for editing the platform!): // get the new selection TreeItem sel = new TreeItem[] { selection; if (selection == null) { setMessage(null); setErrorMessage(null); } else { Object object = selection.getData(); // assume single selection if (object instanceof IPropertySheetEntry) { // get the entry for this item IPropertySheetEntry activeEntry = (IPropertySheetEntry) object; // display the description for the item setMessage(activeEntry.getDescription()); // activate a cell editor on the selection activateCellEditor(selection); } } In fact, I'm not at all sure why the selection was being wrapped in a single element array at all, I'm guessing a holdover from old code?