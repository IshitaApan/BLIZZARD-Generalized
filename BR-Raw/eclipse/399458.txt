Layout overlap in line-wrapped trim bar

When a trim bar contains so many items that they are wrapped onto multiple lines, any spacer item, such as the StatusLine in the bottom trim, is erroneously given the whole height of the trim instead of the height of its line, so that it overlaps the items on the next line. Steps to reproduce: 1. Focus a text editor so that some visible content appears in the status line. 2. Start a lengthy operation, e.g. a check for updates, so that some visible content appears in the progress region. 3. Make the window so narrow that the trim wraps onto two lines. Actual result: The progress region disappears and the status line is inflated to double height. Expected result: The progress region should appear below the status line, both at their normal height. This is fixed by the attached patch. As a side effect, it also fixes bug 389941 for the case of a wrapped bar (which the original fix didnâ€™t).