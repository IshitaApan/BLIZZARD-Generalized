[refactoring] [extract method] Extract Method fails to send a required parameter

Applying the Extract Method refactoring to the following selection results in a new method that fails to compile. Original program: private int f(boolean b1, boolean b2) { int n = 0; int i = 0; // Extract Method from here if (b1) i = 1; if (b2) n = n + i; // to here return n; } Applying Extract Method on the selected code (signalled by the comments) results with the following code: private int f(boolean b1, boolean b2) { int n = 0; int i = 0; n = newMethod(b1, b2, n); return n; } private int newMethod(boolean b1, boolean b2, int n) { int i; if (b1) i = 1; if (b2) n = n + i; return n; } Problem: Eclipse did not identify that the local variable i should be sent as a parameter. The program doesn't compile anymore, because in the statement n = n + i; in the new method, "the local variable i may not have been initialized". I expected the refactored source to look like this: private int f(boolean b1, boolean b2) { int n = 0; int i = 0; n = newMethod(b1, b2, n, i); return n; } private int newMethod(boolean b1, boolean b2, int n, int i) { if (b1) i = 1; if (b2) n = n + i; return n; }