Quick Fix compilation unit rename throws CoreException

Test case: - create class Foo - manually rename class from Foo to Bar - use Quick Fix to "Rename compilation unit to 'Bar.java'" -> CoreException: !SESSION Feb 11, 2004 15:32:14.486 --------------------------------------------- java.version=1.4.2 java.vendor=Sun Microsystems Inc. BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US Command-line arguments: -dev bin -os win32 -ws win32 -arch x86 -nl en_US !ENTRY org.eclipse.jdt.ui 4 10001 Feb 11, 2004 15:32:14.486 !MESSAGE Internal Error !STACK 1 org.eclipse.core.runtime.CoreException: /IAE/src/x/Foo.java is unsaved 	at org.eclipse.jdt.internal.ui.text.correction.ChangeCorrectionProposal.apply(ChangeCorrectionProposal.java:69) 	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.insertProposal(CompletionProposalPopup.java:375) 	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.selectProposalWithMask(CompletionProposalPopup.java:339) 	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.verifyKey(CompletionProposalPopup.java:639) 	at org.eclipse.jface.text.contentassist.ContentAssistant$InternalListener.verifyKey(ContentAssistant.java:622) 	at org.eclipse.jface.text.TextViewer$VerifyKeyListenersManager.verifyKey(TextViewer.java:378) 	at org.eclipse.swt.custom.StyledTextListener.handleEvent(StyledTextListener.java:55) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:857) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842) 	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:650) 	at org.eclipse.swt.custom.StyledText.handleKeyDown(StyledText.java:5321) 	at org.eclipse.swt.custom.StyledText$7.handleEvent(StyledText.java:5066) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:857) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842) 	at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1716) 	at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1712) 	at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3037) 	at org.eclipse.swt.widgets.Control.windowProc(Control.java:2940) 	at org.eclipse.swt.widgets.Display.windowProc(Display.java:2865) 	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method) 	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1371) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2019) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1530) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1506) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:265) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139) 	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:47) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:221) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:101) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:324) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:279) 	at org.eclipse.core.launcher.Main.run(Main.java:742) 	at org.eclipse.core.launcher.Main.main(Main.java:581) !ENTRY org.eclipse.jdt.ui 4 4 Feb 11, 2004 15:32:14.486 !MESSAGE /IAE/src/x/Foo.java is unsaved