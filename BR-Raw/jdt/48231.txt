extract local variable could be smarter and introduce a block [refactoring] [extract local]

In the folowing code code snippet extract the expression a[i] 	public void testFoo() { 		int a[]= new int[20]; 		 		for (int i= 0; i < a.length; i++) 			System.out.println(a[i]); 	} You get the error message that i cannot be resolved (this message is confusing). Then when I say proceed, incorrect code is generated: 	public void testFoo() { 		int a[]= new int[20]; 		 		int j= a[i]; 		for (int i= 0; i < a.length; i++) 			System.out.println(j); 	} The code I would have expected is: 	public void testFoo() { 		int a[]= new int[20]; 		 		for (int i= 0; i < a.length; i++) { 		 int j= a[i]; 			System.out.println(j); } 	} This means the refactoring should be smart enough to introduce the local variable in the correct scope and to also introduce a new block.