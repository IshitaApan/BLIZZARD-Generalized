[content assist] NPE in Content Assist when action has no keybinding

I20061003-0800 I20061003-0800 and N20061003-0010 had test failures in TypeCompletionTest. I'm not sure what has caused them (maybe bug 136264), but there's a problem in the code anyway: org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor$2.assistSessionStarted(ContentAssistProcessor.java:163) calls ContentAssistant.setRepeatedInvocationTrigger(..) with a possibly null argument. AFAICS, this has been released to R3_2_maintenance as well, so you might want to fix it for 3.2.2 also. To reproduce, remove all key bindings from "Edit > Content Assist" and then invoke the action from the menu. org.eclipse.core.runtime.AssertionFailedException: null argument: at org.eclipse.core.runtime.Assert.isNotNull(Assert.java:84) at org.eclipse.core.runtime.Assert.isNotNull(Assert.java:72) at org.eclipse.jface.text.contentassist.ContentAssistant.setRepeatedInvocationTrigger(ContentAssistant.java:2267) at org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor$2.assistSessionStarted(ContentAssistProcessor.java:163) at org.eclipse.jface.text.contentassist.ContentAssistant.fireSessionBeginEvent(ContentAssistant.java:2134) at org.eclipse.jface.text.contentassist.ContentAssistant.prepareToShowCompletions(ContentAssistant.java:1611) at org.eclipse.jface.text.contentassist.ContentAssistant.completePrefix(ContentAssistant.java:1591) at org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.incrementalAssist(AbstractCompletionTest.java:489) at org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.assertIncrementalCompletion(AbstractCompletionTest.java:311) at org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.assertMethodBodyIncrementalCompletion(AbstractCompletionTest.java:211) at org.eclipse.jdt.text.tests.contentassist.TypeCompletionTest.testIncrementalInsertion(TypeCompletionTest.java:206) at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) at junit.extensions.TestSetup$1.protect(TestSetup.java:21) at junit.extensions.TestSetup.run(TestSetup.java:25) at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:327) at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:201) at org.eclipse.test.UITestApplication$3.run(UITestApplication.java:188) at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123) at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3180) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2882) at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1916) at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1880) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95) at org.eclipse.test.UITestApplication.runApplication(UITestApplication.java:131) at org.eclipse.test.UITestApplication.run(UITestApplication.java:58) at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:348) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165) at org.eclipse.core.launcher.Main.invokeFramework(Main.java:341) at org.eclipse.core.launcher.Main.basicRun(Main.java:285) at org.eclipse.core.launcher.Main.run(Main.java:987) at org.eclipse.core.launcher.Main.main(Main.java:962)