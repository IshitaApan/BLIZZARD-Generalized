[syntax highlighting] bracket highlighting should also work if caret is after the last bracket

Follow-up to bug 9503 After using the new bracket matching implementation a bit (match before the closing bracket, not after), I'm missing the old mode in some cases when typing: if (compare(one, two())| // caret at '|' after last ')' Before, I could see with one glance that a closing parenthesis is missing: The '(' in 'compare(one' was highlighted, and after I added the missing ')', the first '(' was highlighted. Now, I don't see any help any more. I still think the fix for bug 9503 was good, but it should have a fallback: When - the character on the left of the caret is a closing bracket and - the character on the right of the caret is not a closing bracket, then we should fall back to the old strategy and still show the matching bracket. I didn't state the second condition as "is not a bracket", because this gives a more consistent story in cases like this after "(byte)": System.out.println((byte)(1 + 2)); System.out.println((byte) (1 + 2)); Note that this change will also affect "Highlight enclosing bracket", which should not highlight more brackets if a matching bracket is already shown.