[JUnit] JUnit view loses several action states on restart

3.6. Oh Boy. The way the JUnit view gets its UI states is a mess! Some are stored in the settings, some are stored in the preferences and some use mementos. This results in different states of actions when doing e.g. close/reopen or after a restart. The biggest problem which we have to fix is that we loose the state for those actions that set their state via new InstanceScope().getNode(JUnitCorePlugin.CORE_PLUGIN_ID) because no one saves that node on shutdown. So, the simplest fix for 3.6.1 is to add the following line to JUnitCorePlugin.stop(BundleContext): new InstanceScope().getNode(JUnitCorePlugin.CORE_PLUGIN_ID).flush(); We could probably just sneak that into bug 317755. Another issue: why are the UI-only settings stored in the JUnit Core plug-in? I think we should move all that code to the UI and clean this up. Test Case: 1. start new workspace 2. open JUnit view 3. toggle 'Activate on Error/Failure Only' 4. exit 5. start ==> verify state