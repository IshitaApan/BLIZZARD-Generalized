[1.5][refactoring] NPE in ExtractMethodInputPage with enum's

I'm trying to refactor some code inside of enum's methods on Eclipse 3.1.1 Build id: M20050811-0400 and I have go this exception: java.lang.NullPointerException 	at org.eclipse.jdt.internal.ui.refactoring.code.ExtractMethodInputPage. getLabel(ExtractMethodInputPage.java:243) 	at org.eclipse.jdt.internal.ui.refactoring.code.ExtractMethodInputPage. createControl(ExtractMethodInputPage.java:119) 	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2. createContents(RefactoringWizardDialog2.java:555) 	at org.eclipse.jface.window.Window.create(Window.java:418) 	at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:996) 	at org.eclipse.jface.window.Window.open(Window.java:776) 	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1. run(RefactoringWizardOpenOperation.java:125) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69) 	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation. run(RefactoringWizardOpenOperation.java:138) 	at org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter. activate(RefactoringStarter.java:40) 	at org.eclipse.jdt.ui.actions.ExtractMethodAction.run(ExtractMethodAction. java:84) This is an inner enum, defined in another class, and code looks like public class ABC { protected enum Functions implements PropsSetter { MINIMUM_FOURIER { public void applyTo(Properties props){ doSomething(); codeToRefactor1(); codeToRefactor2(); ... codeToRefactorN(); } }, } [...] } The exception occurs if I select all "codeToRefactor" methods and say "refactor- >extract method"