[content assist] NPE in content assist

Eclipse 3.3 I20060822-1200, IBM Java 5.0SR2, WinXP SP2. Steps to reproduce * start fresh workspace and paste the code below there package t; import java.util.Stack; public class T { void t() { final class C { } final Stack<C> stack = new // ^ hit Ctrl-Space here 	} } * use content assist to finish "... new Stack<C>();" statement * move cursor back to indicated location and activate contect assists again Problem: "Problem During Content Assist" dialog pops up and NullPointerException is written to .log !ENTRY org.eclipse.jdt.ui 2 0 2006-08-28 13:40:26.756 !MESSAGE The 'org.eclipse.jdt.ui.JavaTypeCompletionProposalComputer' proposal computer from the 'org.eclipse.jdt.ui' plug-in did not complete normally. The extension has thrown a runtime exception. !STACK 0 java.lang.NullPointerException 	at org.eclipse.jdt.internal.ui.text.java.JavaTypeCompletionProposalComputer.computeCompletionProposals(JavaTypeCompletionProposalComputer.java:90) 	at org.eclipse.jdt.internal.ui.text.java.CompletionProposalComputerDescriptor.computeCompletionProposals(CompletionProposalComputerDescriptor.java:303) 	at org.eclipse.jdt.internal.ui.text.java.CompletionProposalCategory.computeCompletionProposals(CompletionProposalCategory.java:264) 	at org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.collectProposals(ContentAssistProcessor.java:251) 	at org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.computeCompletionProposals(ContentAssistProcessor.java:220) 	at org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1753) 	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:478) 	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$17(CompletionProposalPopup.java:475) 	at org.eclipse.jface.text.contentassist.CompletionProposalPopup$2.run(CompletionProposalPopup.java:410) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67) 	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals(CompletionProposalPopup.java:404) 	at org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions(ContentAssistant.java:1582) 	at org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation(CompilationUnitEditor.java:173) 	at org.eclipse.ui.texteditor.ContentAssistAction$1.run(ContentAssistAction.java:82) 	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67) 	at org.eclipse.ui.texteditor.ContentAssistAction.run(ContentAssistAction.java:80) 	at org.eclipse.jface.action.Action.runWithEvent(Action.java:499) 	at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:185) 	at org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:109) 	at org.eclipse.core.commands.Command.executeWithChecks(Command.java:461) 	at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:424) 	at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:160) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:466) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:799) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:846) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:564) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:506) 	at org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:122) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66) 	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:983) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:927) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:952) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:937) 	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:965) 	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:961) 	at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1275) 	at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3352) 	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3252) 	at org.eclipse.swt.widgets.Display.windowProc(Display.java:4052) 	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method) 	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1928) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2999) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95) 	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:401) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:615) 	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336) 	at org.eclipse.core.launcher.Main.basicRun(Main.java:280) 	at org.eclipse.core.launcher.Main.run(Main.java:977) 	at org.eclipse.core.launcher.Main.main(Main.java:952)