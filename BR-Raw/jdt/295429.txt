[package explorer] Adding resource filters causes grief

I20091117-1545. Adding resource filters to a container breaks the Package Explorer: the filtered element remains in the UI as '?'. Test Case: 1. create Java project 2. add second source folder 'src2' 3. add resource filter on project for 'src' ==> '?' in the UI plus exceptions in the .log Talking to Szymon: there's no special flag. Adding a filter triggers a delete delta which we seem not to handle correctly. !ENTRY org.eclipse.jdt.ui 4 10001 2009-11-18 12:48:02.786 !MESSAGE Internal Error !STACK 1 Java Model Exception: Java Model Status [src [in a] does not exist] 	at org.eclipse.jdt.internal.core.JavaElement.newJavaModelException(JavaElement.java:502) 	at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:246) 	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:515) 	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:252) 	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:238) 	at org.eclipse.jdt.internal.core.PackageFragmentRoot.getKind(PackageFragmentRoot.java:477) 	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:645) 	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren(PackageExplorerContentProvider.java:791) 	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:734) 	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren(PackageExplorerContentProvider.java:791) 	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:734) 	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.elementChanged(PackageExplorerContentProvider.java:124) 	at org.eclipse.jdt.internal.core.DeltaProcessor$3.run(DeltaProcessor.java:1557) 	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) 	at org.eclipse.jdt.internal.core.DeltaProcessor.notifyListeners(DeltaProcessor.java:1547) 	at org.eclipse.jdt.internal.core.DeltaProcessor.firePostChangeDelta(DeltaProcessor.java:1381) 	at org.eclipse.jdt.internal.core.DeltaProcessor.fire(DeltaProcessor.java:1357) 	at org.eclipse.jdt.internal.core.DeltaProcessor.resourceChanged(DeltaProcessor.java:1958) 	at org.eclipse.jdt.internal.core.DeltaProcessingState.resourceChanged(DeltaProcessingState.java:470) 	at org.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:291) 	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) 	at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:285) 	at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:149) 	at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:325) 	at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:1063) 	at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:45) 	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55) !SUBENTRY 1 org.eclipse.jdt.core 4 969 2009-11-18 12:48:02.786 !MESSAGE src [in a] does not exist