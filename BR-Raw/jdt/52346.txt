[misc] Undo yields wrong code

Eclipse 3.0M7 Using the same example as in Bug 52344, setting the editor to use space for tab and using the Default-settings for the formatter. Reformatting this code: public class Test1 { /** * <ul> <li>1. K = INT( X / 100 ); <li>2. M = 15 + INT(( 3*K+3 ) / 4 ) - INT(( 8*K+13 ) / 25 ); <li>3. S = 2 - INT(( 3*K+3 ) / 4 ); <li>4. A = MOD( X, 19 ); <li>5. D = MOD( 19*A+M, 30 ); <li>6. R = INT( D / 29 ) + ( INT( D / 28 ) - INT( D / 29 )) * INT( A / 11 ); <li>7. OG = 21 + D - R; - M채rzdatum des Ostervollmonds (= 14. Tag des ersten Monats im Mondkalender, genannt Nisanu) <li>8. SZ = 7 - MOD( X + INT( X / 4 ) + S, 7 ); - Datum des 1. Sonntags im M채rz <li>9. OE = 7 - MOD( OG - SZ, 7 ); </ul> */ public void foo() { } } and immediately pressing undo yields this: public class Test1 { /** * <ul> <li>1. K = INT( X / 100 ); <li>2. M = 15 + INT(( 3*K+3 ) / 4 ) - INT(( 8*K+13 ) / 25 ); <li>3. S = 2 - INT(( 3*K+3 ) / 4 ); <li>4. A = MOD( X, 19 ); <li>5. D = MOD( 19*A+M, 30 ); <li>6. R = INT( D / 29 ) + ( INT( D / 28 ) - INT( D / 29 )) * INT( A / 11 ); <li>7. OG = 21 + D - R; - M채rzdatum des Ostervollmonds (= 14. Tag des ersten Monats im Mondkalender, genannt Nisanu) <li>8. SZ = 7 - MOD( X + INT( X / 4 ) + S, 7 ); - Datum des 1. Sonntags im M채rz <li>9. OE = 7 - MOD( OG - SZ, 7 ); </ul> */ public void foo() { } }/ 	public void foo() { 	} } Yes, settings the editor and the formatter to using different "things" for a tab is probably useless, but I don't think it should break code when doing stupid things :-)