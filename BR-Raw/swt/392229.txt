[Browser] JS_EvaluateUCScriptForPrincipals crash with XULRunner 10 (IBM JRE only)

Created attachment 222492 full native dump - works with older XULRunner versions, and with non-IBM JREs - snippet is below, followed by the java portion of the native dump: public class Main0 { 	static int counter = 0; 	static Shell shell; 	static final String XULRUNNER_PATH = "c:\\xulrunner-10.0.2\\xulrunner"; 	 public static void main(String[] args) { 	System.setProperty("org.eclipse.swt.browser.XULRunnerPath", XULRUNNER_PATH); final String file1Content = "<html><body>hi1!</body></html>"; final String file2Content = "<html><body>hi2!</body></html>"; final Display display = new Display(); Runnable runnable = new Runnable() { 		public void run() { 			if (shell != null) { 				shell.dispose(); 			} 			shell = new Shell(display); 			shell.setLayout(new FillLayout()); 			Browser browser = new Browser(shell, SWT.MOZILLA); 			shell.open(); 			browser.setText((++counter % 2) == 0 ? file1Content : file2Content); 			display.timerExec(10000, this); 		} 	}; 	display.timerExec(0, runnable); 	while (true) { 		if (!display.readAndDispatch()) display.sleep(); 	} } } 3XMTHREADINFO "main" J9VMThread:0x231C7800, j9thread_t:0x00E84778, java/lang/Thread:0x029884B0, state:R, prio=5 3XMTHREADINFO1 (native thread ID:0x1A50, native priority:0x5, native policy:UNKNOWN) 3XMTHREADINFO3 Java callstack: 4XESTACKTRACE at org/eclipse/swt/internal/mozilla/XPCOM._JS_EvaluateUCScriptForPrincipals(Native Method) 4XESTACKTRACE at org/eclipse/swt/internal/mozilla/XPCOM.JS_EvaluateUCScriptForPrincipals(XPCOM.java:222) 4XESTACKTRACE at org/eclipse/swt/browser/Mozilla.execute(Mozilla.java:1387) 4XESTACKTRACE at org/eclipse/swt/browser/Mozilla.onDispose(Mozilla.java:2651) 4XESTACKTRACE at org/eclipse/swt/browser/Mozilla$5.handleEvent(Mozilla.java:966) 4XESTACKTRACE at org/eclipse/swt/widgets/EventTable.sendEvent(EventTable.java:84) 4XESTACKTRACE at org/eclipse/swt/widgets/Widget.sendEvent(Widget.java:1053) 4XESTACKTRACE at org/eclipse/swt/widgets/Widget.sendEvent(Widget.java:1077) 4XESTACKTRACE at org/eclipse/swt/widgets/Widget.sendEvent(Widget.java:1058) 4XESTACKTRACE at org/eclipse/swt/widgets/Widget.release(Widget.java:808) 4XESTACKTRACE at org/eclipse/swt/widgets/Composite.releaseChildren(Composite.java:873) 4XESTACKTRACE at org/eclipse/swt/widgets/Canvas.releaseChildren(Canvas.java:166) 4XESTACKTRACE at org/eclipse/swt/widgets/Decorations.releaseChildren(Decorations.java:790) 4XESTACKTRACE at org/eclipse/swt/widgets/Shell.releaseChildren(Shell.java:1290) 4XESTACKTRACE at org/eclipse/swt/widgets/Widget.release(Widget.java:811) 4XESTACKTRACE at org/eclipse/swt/widgets/Widget.dispose(Widget.java:446) 4XESTACKTRACE at org/eclipse/swt/widgets/Decorations.dispose(Decorations.java:448) 4XESTACKTRACE at org/eclipse/swt/widgets/Shell.dispose(Shell.java:715) 4XESTACKTRACE at win32/Main0$1.run(Main0.java:31) 4XESTACKTRACE at org/eclipse/swt/widgets/Display.runTimer(Display.java:4270) 4XESTACKTRACE at org/eclipse/swt/widgets/Display.messageProc(Display.java:3357) 4XESTACKTRACE at org/eclipse/swt/internal/win32/OS.DispatchMessageW(Native Method) 4XESTACKTRACE at org/eclipse/swt/internal/win32/OS.DispatchMessage(OS.java:2546) 4XESTACKTRACE at org/eclipse/swt/widgets/Display.readAndDispatch(Display.java:3756) 4XESTACKTRACE at win32/Main0.main(Main0.java:43) 3XMTHREADINFO3 Native callstack: 4XENATIVESTACK setup_native_thread+0x15d (j9introspect.c:343, 0x68274AFD [J9PRT26+0x4afd]) 4XENATIVESTACK j9introspect_threads_startDo_with_signal+0x138 (j9introspect.c:452, 0x68274D58 [J9PRT26+0x4d58]) 4XENATIVESTACK j9introspect_threads_startDo+0x16 (j9introspect.c:471, 0x68274DC6 [J9PRT26+0x4dc6]) 4XENATIVESTACK protectedStartDo+0x18 (javadump.cpp:4336, 0x67EFBFB8 [j9dmp26+0xbfb8]) 4XENATIVESTACK j9sig_protect+0x44 (j9signal.c:150, 0x6827F0A4 [J9PRT26+0xf0a4]) 4XENATIVESTACK JavaCoreDumpWriter::writeThreadSection+0x2cb (javadump.cpp:1700, 0x67EFF64B [j9dmp26+0xf64b]) 4XENATIVESTACK protectedWriteSection+0xb (javadump.cpp:4296, 0x67EFBF7B [j9dmp26+0xbf7b]) 4XENATIVESTACK j9sig_protect+0x44 (j9signal.c:150, 0x6827F0A4 [J9PRT26+0xf0a4]) 4XENATIVESTACK JavaCoreDumpWriter::JavaCoreDumpWriter+0x2cf (javadump.cpp:417, 0x67F0009F [j9dmp26+0x1009f]) 4XENATIVESTACK runJavadump+0x1e (javadump.cpp:4524, 0x67F002DE [j9dmp26+0x102de]) 4XENATIVESTACK doJavaDump+0x27 (dmpagent.c:845, 0x67EF1D87 [j9dmp26+0x1d87]) 4XENATIVESTACK protectedDumpFunction+0x14 (dmpagent.c:2730, 0x67EF3C44 [j9dmp26+0x3c44]) 4XENATIVESTACK j9sig_protect+0x44 (j9signal.c:150, 0x6827F0A4 [J9PRT26+0xf0a4]) 4XENATIVESTACK runDumpFunction+0x5f (dmpagent.c:2707, 0x67EF4E6F [j9dmp26+0x4e6f]) 4XENATIVESTACK runDumpAgent+0x25c (dmpagent.c:2630, 0x67EF50EC [j9dmp26+0x50ec]) 4XENATIVESTACK triggerDumpAgents+0x351 (trigger.c:912, 0x67F01301 [j9dmp26+0x11301]) 4XENATIVESTACK twAssertion+0x2b (tracewrappers.c:142, 0x67ED107B [j9trc26+0x107b]) 4XENATIVESTACK logTracePoint+0x170 (ut_trace.c:2047, 0x676D0540 [j9ute26+0x10540]) 4XENATIVESTACK utsTraceV+0xd4 (ut_trace.c:2114, 0x676D0624 [j9ute26+0x10624]) 4XENATIVESTACK j9Trace+0x4c (tracewrappers.c:726, 0x67ED1C5C [j9trc26+0x1c5c]) 4XENATIVESTACK unwrapBlockAndCheckTags+0xc0 (j9memtag.c:145, 0x68275700 [J9PRT26+0x5700]) 4XENATIVESTACK j9mem_free_memory+0x40 (j9memtag.c:236, 0x68275850 [J9PRT26+0x5850]) 4XENATIVESTACK jniArrayFreeMemoryFromThread+0x4d (jnimem.c:63, 0x67F4400D [j9vm26+0x2400d]) 4XENATIVESTACK _releaseArrayElements@16+0x34c (jnisup.asm:8264, 0x67F4950C [j9vm26+0x2950c]) 4XENATIVESTACK _Java_org_eclipse_swt_internal_mozilla_XPCOM__1JS_1EvaluateUCScriptForPrincipals@44+0xf5 (0x00E687F9 [swt-xulrunner-win32-4309+0x87f9]) 4XENATIVESTACK VMprJavaSendNative+0x504 (jnisend.asm:519, 0x67F44554 [j9vm26+0x24554]) 4XENATIVESTACK callVirtualIntMethodV+0x25 (jnicgen.c:102, 0x67F3E825 [j9vm26+0x1e825]) 4XENATIVESTACK _Java_org_eclipse_swt_internal_Callback_reset@8+0x1a8 (0x248F122F [swt-win32-4309+0x122f]) 4XENATIVESTACK gapfnScSendMessage+0x270 (0x75DB6238 [USER32+0x16238]) 4XENATIVESTACK gapfnScSendMessage+0x922 (0x75DB68EA [USER32+0x168ea]) 4XENATIVESTACK LoadStringW+0x11f (0x75DB7D31 [USER32+0x17d31]) 4XENATIVESTACK DispatchMessageW+0xf (0x75DB7DFA [USER32+0x17dfa]) 4XENATIVESTACK _Java_org_eclipse_swt_internal_win32_OS_DispatchMessageW@12+0x31 (0x248F3AF3 [swt-win32-4309+0x3af3]) 4XENATIVESTACK J9HookDispatch+0x88 (hookable.c:176, 0x685910B8 [J9HOOKABLE26+0x10b8]) 4XENATIVESTACK triggerClassInitializeEvent+0x31 (jclhookhelp.c:33, 0x676EC7C1 [jclse7b_26+0xc7c1]) 4XENATIVESTACK java_lang_J9VMInternals_initializeImpl+0x14c (internals.asm:1098, 0x676E6EFC [jclse7b_26+0x6efc]) 4XENATIVESTACK gpCheckCallin+0x6c (jnicsup.c:555, 0x67F410EC [j9vm26+0x210ec]) 4XENATIVESTACK callStaticVoidMethod+0x43 (jnicgen.c:304, 0x67F3F253 [j9vm26+0x1f253]) 4XENATIVESTACK (0x00F13722 [javaw+0x3722])