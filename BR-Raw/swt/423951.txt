NPEs when trying to close EGit Commit dialog

The fix for bug 422090 causes a severe issue: When I try to close the EGit Commit dialog, I get a ton of NPEs and the dialog stays open. I cannot commit through the dialog any more. I can close the dialog via Esc or the close box. Workaround for EGit is to commit via the Git Staging view. java.lang.NullPointerException 	at org.eclipse.swt.widgets.Tree._getItem(Tree.java:254) 	at org.eclipse.swt.widgets.Tree.getItem(Tree.java:3158) 	at org.eclipse.swt.widgets.Tree.CDDS_ITEMPREPAINT(Tree.java:937) 	at org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:7469) 	at org.eclipse.swt.widgets.Control.wmNotify(Control.java:5618) 	at org.eclipse.swt.widgets.Composite.wmNotify(Composite.java:1935) 	at org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:5169) 	at org.eclipse.swt.widgets.Control.windowProc(Control.java:4666) 	at org.eclipse.swt.widgets.Display.windowProc(Display.java:5001) 	at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method) 	at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2443) 	at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1553) 	at org.eclipse.swt.widgets.Control.windowProc(Control.java:4705) 	at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:6024) 	at org.eclipse.swt.widgets.Display.windowProc(Display.java:5001) 	at org.eclipse.swt.internal.win32.OS.SetWindowLongW(Native Method) 	at org.eclipse.swt.internal.win32.OS.SetWindowLong(OS.java:3456) 	at org.eclipse.swt.widgets.Tree._removeListener(Tree.java:269) 	at org.eclipse.swt.widgets.Widget.removeListener(Widget.java:931) 	at org.eclipse.jface.viewers.OwnerDrawLabelProvider.setOwnerDrawEnabled(OwnerDrawLabelProvider.java:266) 	at org.eclipse.jface.viewers.OwnerDrawLabelProvider.dispose(OwnerDrawLabelProvider.java:113) 	at org.eclipse.jface.viewers.ViewerColumn.handleDispose(ViewerColumn.java:166) 	at org.eclipse.jface.viewers.ViewerColumn.handleDispose(ViewerColumn.java:174) 	at org.eclipse.jface.viewers.ViewerColumn.access$0(ViewerColumn.java:173) 	at org.eclipse.jface.viewers.ViewerColumn$2.widgetDisposed(ViewerColumn.java:67) 	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:123) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4351) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1085) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1066) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:816) 	at org.eclipse.swt.widgets.Tree.releaseChildren(Tree.java:3941) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Canvas.releaseChildren(Canvas.java:165) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:874) 	at org.eclipse.swt.widgets.Canvas.releaseChildren(Canvas.java:165) 	at org.eclipse.swt.widgets.Decorations.releaseChildren(Decorations.java:789) 	at org.eclipse.swt.widgets.Shell.releaseChildren(Shell.java:1290) 	at org.eclipse.swt.widgets.Widget.release(Widget.java:819) 	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:454) 	at org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:447) 	at org.eclipse.swt.widgets.Shell.dispose(Shell.java:715) 	at org.eclipse.jface.window.Window.close(Window.java:336) 	at org.eclipse.jface.dialogs.Dialog.close(Dialog.java:1004) 	at org.eclipse.jface.window.Window.handleShellCloseEvent(Window.java:743) 	at org.eclipse.jface.dialogs.TrayDialog.handleShellCloseEvent(TrayDialog.java:224) 	at org.eclipse.jface.window.Window$3.shellClosed(Window.java:689) 	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:98) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4351) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1061) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1085) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1070) 	at org.eclipse.swt.widgets.Decorations.closeWidget(Decorations.java:308) 	at org.eclipse.swt.widgets.Shell.close(Shell.java:538) 	at org.eclipse.swt.widgets.Shell.traverseEscape(Shell.java:1957) 	at org.eclipse.swt.widgets.Control.traverse(Control.java:4111) 	at org.eclipse.swt.widgets.Control.translateTraversal(Control.java:4088) 	at org.eclipse.swt.widgets.Composite.translateTraversal(Composite.java:1233) 	at org.eclipse.swt.widgets.Display.translateTraversal(Display.java:4819) 	at org.eclipse.swt.widgets.Display.filterMessage(Display.java:1276) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3755) 	at org.eclipse.jface.window.Window.runEventLoop(Window.java:827) 	at org.eclipse.jface.window.Window.open(Window.java:803) 	at org.eclipse.egit.ui.internal.commit.CommitUI.commit(CommitUI.java:179) 	at org.eclipse.egit.ui.internal.actions.CommitActionHandler.execute(CommitActionHandler.java:54) 	at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:290) 	at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:90) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:606) 	at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56) 	at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:243) 	at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:224) 	at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:132) 	at org.eclipse.e4.core.commands.internal.HandlerServiceHandler.execute(HandlerServiceHandler.java:163) 	at org.eclipse.core.commands.Command.executeWithChecks(Command.java:499) 	at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508) 	at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:222) 	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.executeCommand(KeyBindingDispatcher.java:285) 	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.press(KeyBindingDispatcher.java:505) 	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.processKeyEvent(KeyBindingDispatcher.java:556) 	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.filterKeySequenceBindings(KeyBindingDispatcher.java:377) 	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.access$0(KeyBindingDispatcher.java:323) 	at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher$KeyDownFilter.handleEvent(KeyBindingDispatcher.java:85) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1262) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1060) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1085) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1070) 	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1112) 	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1108) 	at org.eclipse.swt.widgets.Widget.wmKeyDown(Widget.java:1831) 	at org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:4975) 	at org.eclipse.swt.widgets.Tree.WM_KEYDOWN(Tree.java:6156) 	at org.eclipse.swt.widgets.Control.windowProc(Control.java:4642) 	at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:6024) 	at org.eclipse.swt.widgets.Display.windowProc(Display.java:5014) 	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method) 	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2549) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757) 	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1122) 	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1006) 	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:146) 	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:611) 	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:565) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150) 	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125) 	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:109) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:80) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:372) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:226) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 	at java.lang.reflect.Method.invoke(Method.java:606) 	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636) 	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591) 	at org.eclipse.equinox.launcher.Main.run(Main.java:1450) 	at org.eclipse.equinox.launcher.Main.main(Main.java:1426)