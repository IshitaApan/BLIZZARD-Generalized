Cannot compile recursive tag with ant if it uses a class from the webapp

The following simple tag file cannot be compiled with the jspc ant task (or the jpsc maven plugin) : <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> <%@ taglib prefix="tags" tagdir="/WEB-INF/tags" %> Hello world ! <c:if test="${false}" > <tags:recursive /> </c:if> The error is org.apache.jasper.JasperException: /WEB-INF/tags/recursive.tag(21,0) Unable to load tag handler class "org.apache.taglibs.standard.tag.rt.core.IfTag" for tag "c:if" It's OK when the compilation is done "online", when the first jsp that uses this tag is called with a http request. The problem is that japer's TagFileProcessor does not set the correct classloader when compiling recursive tags. It works in online mode because the parent classloader of the jsp classloader is the webapp classloader.