Http Post requests not handled correctly if there is more than one space between the "POST" and the URL

When a Tomcat based Http listener receives a Soap request with more than one space between the "POST" command and the URL, this error response is returned by Tomcat version 5.5.20, and there is no response at all from other versions (4.0.2 and 5.0): HTTP/1.1 505 HTTP Version Not Supported Server: Apache-Coyote/1.1 Date: Fri, 08 Jun 2007 22:19:07 GMT Connection: close Here is what I mean about there being more than one space between the Post and the URL. In the examples below I leave out the body of the Soap request for simplification. I used the TCPMonitor supplied by the Apache project to capture a Soap request and here is how it is displayed in the monitor (it probably looks completely different on the wire): POST http://C010030S:5599/NXAServer/NextAxiomServer HTTP/1.0 User-Agent: Natural 4.2 Content-Type: text/xml; charset=utf-8 SOAPAction: urn:rpc?path=Training.webMethods.validateUserid Content-Length: 338 Note the four spaces between the "POST" and the URL in the first line. Now here is what the request looks like after removing three of the four spaces: POST http://C010030S:5599/NXAServer/NextAxiomServer HTTP/1.0 User-Agent: Natural 4.2 Content-Type: text/xml; charset=utf-8 SOAPAction: urn:rpc?path=Training.webMethods.validateUserid Content-Length: 338 The request seems to only get handled correctly by the Tomcat HTTP listener when there is one space between the "Post" and the URL. This example is from a Soap request issued by a Natural program running on a Z/OS mainframe. Instead of sending you a complete example to recreate the problem (which would require a mainframe) it would probably be easy to use the Apache TCP Monitor to capture a Soap request from an available test system and then add one of more spaces between the Post and the URL, resend the request in the monitor and see what happens. What I'm trying to do is invoke from Natural on a mainframe (which unfortunately we have no control over) a web service running on webMethods (IntegrationServer version 6.1 which uses Tomcat402B.jar, so that may be version 4.0.2B (?), and JVM 1.4.2_13). No response is returned at all from that version. I then tried to do the same thing with webMethods version 6.5 (which uses Tomcat 5.0 and JVM 1.4.2_07) and still got no response. Then I tried NextAxiom version 6.5.2.0 (which uses Tomcat version 5.5.20) and I at least got a response from it (see the response at the top of this description). I then tried invoking web services that use other Http listeners and found the two I tried handled the Soap request just fine. One example is IBM HTTP Server (version 1.3.8) that is running on a WebSphere server; it handles the request with more than one space just fine (by "fine" I mean it recognized the URL and handed it off to the process at that URL). The other I don't know much about; it was just some remote web service I found on the web (http://www.webserviceX.NET). I have looked through the Apache Tomcat website, documentation and an associate looked through the bug database for version 5, and we can't find anything that addresses this problem. I downloaded the source code, but got lost looking around and decided to ask for some help to find and fix this problem. Or maybe someone has an idea on how to configure the Http listener to handle this better. If this is a bug, I would be more than happy to attempt to fix this myself if someone could point me in the right direction. Thank you very very much for your time and efforts. Dick Salisbury Idaho Power Company dsalisbury@idahopower.com