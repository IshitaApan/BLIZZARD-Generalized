DefaultServlet - serving multiple encodings

Created attachment 23272 Minor refactor of DefaultServlet Hi, It had to happen sooner or later. In one of my tomcat applications I now have to serve multiple collections of static content which may have various encodings. We depend heavily on DefaultServlet, but in its current state it is not possible to control encoding on a resource-by-resource basis. One can set the "fileEncoding" parameter, but this controls all static resources. The structure of the current code makes this impossible to solve by extending the class, since fileEncoding is a global instance variable. The attached refactoring mitigates this primarily by changing the method signature of serveResource() to contain an encoding argument. The extending class may override this method on every call if necessary.