[Regression]Preview attached report in viewer(frameset mode) throws NPE

Created attachment 95015 report design Description: [Regression]Preview attached report in viewer(frameset mode) throws NPE. but preview in layout is ok. I also found, the preview in frameset mode works well in tomcat 5.0 but failed in tomcat 5.5. Finally I deleted the chart in report design, all the previews are working well. Build number: 2.3.0.v20080407-0630 Steps to reproduce: 1, Download attached report design 2, Preview in Web viewer(frameset mode) Expected result: Preview is ok Actual result: NPE Throws out. Error log: org.eclipse.birt.report.service.api.ReportServiceException: Error happened while running the report; nested exception is: java.lang.NullPointerException Show Exception Stack Trace org.eclipse.birt.data.engine.impl.ResultIterator$RDSaveHelper.saveNamingRelation(ResultIterator.java:1091) org.eclipse.birt.data.engine.impl.ResultIterator$RDSaveHelper.access$2(ResultIterator.java:1088) org.eclipse.birt.data.engine.impl.ResultIterator.saveNamingRelation(ResultIterator.java:868) org.eclipse.birt.data.engine.impl.ResultIterator.close(ResultIterator.java:833) org.eclipse.birt.report.engine.data.dte.QueryResultSet.close(QueryResultSet.java:272) org.eclipse.birt.report.engine.executor.ExtendedGenerateExecutor.closeQueries(ExtendedGenerateExecutor.java:227) org.eclipse.birt.report.engine.executor.ExtendedGenerateExecutor.close(ExtendedGenerateExecutor.java:52) org.eclipse.birt.report.engine.executor.ExtendedItemExecutor.close(ExtendedItemExecutor.java:159) org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportItemExecutor.close(WrappedReportItemExecutor.java:39) org.eclipse.birt.report.engine.internal.executor.emitter.ReportItemEmitterExecutor.close(ReportItemEmitterExecutor.java:40) org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportItemExecutor.close(WrappedReportItemExecutor.java:39) org.eclipse.birt.report.engine.internal.executor.dup.SuppressDuplicateItemExecutor.close(SuppressDuplicateItemExecutor.java:35) org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.execute(HTMLAbstractLM.java:443) org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.execute(HTMLAbstractLM.java:442) org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.execute(HTMLAbstractLM.java:442) org.eclipse.birt.report.engine.layout.html.HTMLListingBandLM.intializeHeaderContent(HTMLListingBandLM.java:96) org.eclipse.birt.report.engine.layout.html.HTMLListingBandLM.initialize(HTMLListingBandLM.java:48) org.eclipse.birt.report.engine.layout.html.HTMLTableBandLM.initialize(HTMLTableBandLM.java:42) org.eclipse.birt.report.engine.layout.html.HTMLLayoutManagerFactory.createLayoutManager(HTMLLayoutManagerFactory.java:50) org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.createLayoutManager(HTMLReportLayoutEngine.java:142) org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:67) org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:27) org.eclipse.birt.report.engine.layout.html.HTMLGroupLM.layoutChildren(HTMLGroupLM.java:67) org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:133) org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:68) org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:27) org.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren(HTMLTableLM.java:76) org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:133) org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:68) org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:89) org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:101) org.eclipse.birt.report.engine.presentation.ReportDocumentBuilder.build(ReportDocumentBuilder.java:195) org.eclipse.birt.report.engine.api.impl.RunTask.doRun(RunTask.java:227) org.eclipse.birt.report.engine.api.impl.RunTask.run(RunTask.java:88) org.eclipse.birt.report.service.ReportEngineService.runReport(ReportEngineService.java:981) org.eclipse.birt.report.service.BirtViewerReportService.runReport(BirtViewerReportService.java:144) org.eclipse.birt.report.service.actionhandler.BirtRunReportActionHandler.__execute(BirtRunReportActionHandler.java:78) org.eclipse.birt.report.service.actionhandler.BirtChangeParameterActionHandler.runReport(BirtChangeParameterActionHandler.java:57) org.eclipse.birt.report.service.actionhandler.AbstractChangeParameterActionHandler.__execute(AbstractChangeParameterActionHandler.java:53) org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(AbstractBaseActionHandler.java:89) org.eclipse.birt.report.soapengine.processor.AbstractBaseDocumentProcessor.__executeAction(AbstractBaseDocumentProcessor.java:47) org.eclipse.birt.report.soapengine.processor.AbstractBaseComponentProcessor.executeAction(AbstractBaseComponentProcessor.java:159) org.eclipse.birt.report.soapengine.processor.BirtDocumentProcessor.handleChangeParameter(BirtDocumentProcessor.java:100)