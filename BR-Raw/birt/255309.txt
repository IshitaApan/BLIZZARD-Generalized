Enhance read-only report processing in designer

Created attachment 117866 screenshot Description: The read-only report designed using older build can be previewed without save. Build number: 2.5.0.v20081114-1156 Steps to reproduce: 1. Put the attached report design in the RCP workspace. 2. Open the report, "Warning" dialogue pops up to say "The design file was created by an earlier version of BIRT. Click OK to convert it to a format supported by the current version of the product." 3. Click "OK", then preview the report without saving, and "Confirm" dialogue pops up to say "The report design was created by an earlier version of BIRT Designer. Saving it will upgrade it to the current version, which may prevernt an earlier version of BIRT from opening it. Would you still like to save it?". 4. Click "OK", and "File not found." dialogue pops up. 5. Click "OK". Actual result: The report is previewed without saving and exception is thrown out. Expected result: Either the report can be saved and previewed or the report can be neither saved nor previewed. Error log: !ENTRY org.eclipse.birt.report.designer.ui 4 1001 2008-11-14 14:44:46.109 !MESSAGE File not found:D:\test\20081114_test\birt-rcp-report-designer-2_5_0\workspace\Payment.rptdesign (Access is denied) !STACK 0 org.eclipse.birt.report.designer.core.runtime.GUIException: File not found:D:\test\20081114_test\birt-rcp-report-designer-2_5_0\workspace\Payment.rptdesign (Access is denied) 	at org.eclipse.birt.report.designer.core.runtime.GUIException.createGUIException(GUIException.java:78) 	at org.eclipse.birt.report.designer.internal.ui.util.ExceptionHandler.handle(ExceptionHandler.java:169) 	at org.eclipse.birt.report.designer.internal.ui.util.ExceptionHandler.handle(ExceptionHandler.java:150) 	at org.eclipse.birt.report.designer.internal.ui.util.ExceptionHandler.handle(ExceptionHandler.java:89) 	at org.eclipse.birt.report.designer.internal.ui.editors.FileReportProvider$1$1.run(FileReportProvider.java:207) 	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1800) 	at org.eclipse.birt.report.designer.internal.ui.editors.FileReportProvider$1.run(FileReportProvider.java:212) 	at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:446) 	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:354) 	at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507) 	at org.eclipse.birt.report.designer.internal.ui.editors.FileReportProvider.saveFile(FileReportProvider.java:247) 	at org.eclipse.birt.report.designer.internal.ui.editors.FileReportProvider.saveReport(FileReportProvider.java:175) 	at org.eclipse.birt.report.designer.internal.ui.editors.FileReportProvider.saveReport(FileReportProvider.java:158) 	at org.eclipse.birt.report.designer.internal.ui.editors.layout.ReportEditorWithPalette.doSave(ReportEditorWithPalette.java:1012) 	at org.eclipse.birt.report.designer.ui.editors.MultiPageReportEditor.doSave(MultiPageReportEditor.java:465) 	at org.eclipse.birt.report.designer.ui.actions.PreviewToolbarMenuAction.preview(PreviewToolbarMenuAction.java:187) 	at org.eclipse.birt.report.designer.ui.actions.PreviewToolbarMenuAction$2.widgetSelected(PreviewToolbarMenuAction.java:113) 	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:228) 	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003) 	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3848) 	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3446) 	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2382) 	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2346) 	at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2198) 	at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:493) 	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288) 	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:488) 	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 	at org.eclipse.birt.report.designer.ui.rcp.DesignerApplication.run(DesignerApplication.java:38) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 	at java.lang.reflect.Method.invoke(Unknown Source) 	at org.eclipse.equinox.internal.app.EclipseAppContainer.callMethodWithException(EclipseAppContainer.java:574) 	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:195) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:370) 	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 	at java.lang.reflect.Method.invoke(Unknown Source) 	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:549) 	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:504) 	at org.eclipse.equinox.launcher.Main.run(Main.java:1236) Caused by: java.io.FileNotFoundException: D:\test\20081114_test\birt-rcp-report-designer-2_5_0\workspace\Payment.rptdesign (Access is denied) 	at java.io.FileOutputStream.open(Native Method) 	at java.io.FileOutputStream.<init>(Unknown Source) 	at java.io.FileOutputStream.<init>(Unknown Source) 	at org.eclipse.birt.report.designer.internal.ui.editors.FileReportProvider$1.execute(FileReportProvider.java:232) 	at org.eclipse.birt.report.designer.internal.ui.editors.FileReportProvider$1$1.run(FileReportProvider.java:199) 	... 42 more !SUBENTRY 1 org.eclipse.birt.report.designer.ui 1 1001 2008-11-14 14:44:46.109 !MESSAGE Plug-in Provider:Eclipse.org !SUBENTRY 1 org.eclipse.birt.report.designer.ui 1 1001 2008-11-14 14:44:46.109 !MESSAGE Plug-in Name:BIRT Designer UI !SUBENTRY 1 org.eclipse.birt.report.designer.ui 1 1001 2008-11-14 14:44:46.109 !MESSAGE Plug-in ID:org.eclipse.birt.report.designer.ui !SUBENTRY 1 org.eclipse.birt.report.designer.ui 1 1001 2008-11-14 14:44:46.109 !MESSAGE Version:2.5.0.v20081113 !SUBENTRY 1 org.eclipse.birt.report.designer.ui 4 1001 2008-11-14 14:44:46.109 !MESSAGE Error Code:Error.GUIException.invokedByIOException !SUBENTRY 1 org.eclipse.birt.report.designer.ui 4 1001 2008-11-14 14:44:46.109 !MESSAGE Error Message:File not found:D:\test\20081114_test\birt-rcp-report-designer-2_5_0\workspace\Payment.rptdesign (Access is denied)