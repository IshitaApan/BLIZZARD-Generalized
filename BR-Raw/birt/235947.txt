Previewing report throws exception for the first time

Created attachment 103865 report design Description: In attached report design ,there has a measure filter defined in onPrepare script and using SimpleElementFactory to get the instance. Preview it for the first time will throw Exception, but preview again no exception occurs and result is correct. Build number: 2.3.0.v20080606-0630 Steps to reproduce: 1, Open attached report design 2, Preview Expected result: No Exception and result is correct Actual result: Exception occus and result is incorrect Error log: ReferenceError: "SimpleElementFactory" is not defined. at line 33 of JavaScript: ( 1 time(s) ) detail : org.eclipse.birt.report.engine.api.EngineException: ReferenceError: "SimpleElementFactory" is not defined. at line 33 of JavaScript: at org.eclipse.birt.report.engine.executor.ExecutionContext.addException(ExecutionContext.java:1110) at org.eclipse.birt.report.engine.api.impl.ScriptedDesignHandler.visitExtendedItem(ScriptedDesignHandler.java:434) at org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitExtendedItem(DesignVisitor.java:1235) at org.eclipse.birt.report.model.elements.ExtendedItem.apply(ExtendedItem.java:141) at org.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123) at org.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitReportDesign(ScriptedDesignVisitor.java:106) at org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitReportDesign(DesignVisitor.java:1175) at org.eclipse.birt.report.model.elements.ReportDesign.apply(ReportDesign.java:89) at org.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123) at org.eclipse.birt.report.engine.api.impl.EngineTask.prepareDesign(EngineTask.java:1310) at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:89) at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:72) at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(ReportEngineService.java:928) at org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(BirtViewerReportService.java:876) at org.eclipse.birt.report.service.actionhandler.BirtGetPageAllActionHandler.__execute(BirtGetPageAllActionHandler.java:123) at org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(AbstractBaseActionHandler.java:89) at org.eclipse.birt.report.soapengine.processor.AbstractBaseDocumentProcessor.__executeAction(AbstractBaseDocumentProcessor