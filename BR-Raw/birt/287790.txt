Exception when set bottomN in xtab map and preview[1102]

Description exception when preview report containing bottomN in xtab map rule Build number:2.5.1.v20090827 Steps to reproduce: 1. Insert xtab. 2. Add a map rule using bottomN function 3. Preview Expected result: Display xtab content with map rule Actual result: Exception. Error log: ReportDesign (id = 1): + Unacceptable expression for the aggregation binding "TOTAL_COLUMN_0". Unacceptable expression for the aggregation binding "TOTAL_COLUMN_0". data.engine.aggregation.InvalidBindingExpression ( 1 time(s) ) detail : org.eclipse.birt.report.engine.api.EngineException: Unacceptable expression for the aggregation binding "TOTAL_COLUMN_0". Unacceptable expression for the aggregation binding "TOTAL_COLUMN_0". 	at org.eclipse.birt.report.engine.executor.ExecutorManager$ExecutorContext.executeQuery(ExecutorManager.java:432) 	at org.eclipse.birt.report.item.crosstab.core.re.executor.BaseCrosstabExecutor.executeQuery(BaseCrosstabExecutor.java:114) 	at org.eclipse.birt.report.item.crosstab.core.re.executor.CrosstabReportItemExecutor.execute(CrosstabReportItemExecutor.java:102) 	at org.eclipse.birt.report.engine.executor.ExtendedItemExecutor.execute(ExtendedItemExecutor.java:62) 	at org.eclipse.birt.report.engine.internal.executor.dup.SuppressDuplicateItemExecutor.execute(SuppressDuplicateItemExecutor.java:43) 	at org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportItemExecutor.execute(WrappedReportItemExecutor.java:46) 	at org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute(LocalizedReportItemExecutor.java:34) 	at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:65) 	at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:90) 	at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:99) 	at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:170) 	at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:75) 	at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(ReportEngineService.java:882) 	at org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(BirtViewerReportService.java:973) 	at org.eclipse.birt.report.service.actionhandler.BirtGetPageAllActionHandler.__execute(BirtGetPageAllActionHandler.java:131) 	at org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(AbstractBaseActionHandler.java:90) 	at org.eclipse.birt.report.soapengine.processor.AbstractBaseDocumentProcessor.__executeAction(AbstractBaseDocumentProcessor.java:47) 	at org.eclipse.birt.report.soapengine.processor.AbstractBaseComponentProcessor.executeAction(AbstractBaseComponentProcessor.java:143) 	at org.eclipse.birt.report.soapengine.processor.BirtDocumentProcessor.handleGetPageAll(BirtDocumentProcessor.java:183) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:597) 	at org.eclipse.birt.report.soapengine.processor.AbstractBaseComponentProcessor.process(AbstractBaseComponentProcessor.java:112) 	at org.eclipse.birt.report.soapengine.endpoint.BirtSoapBindingImpl.getUpdatedObjects(BirtSoapBindingImpl.java:66) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 	at java.lang.reflect.Method.invoke(Method.java:597) 	at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397) 	at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186) 	at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323) 	at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32) 	at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118) 	at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83) 	at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454) 	at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281) 	at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699) 	at org.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.doPost(BirtSoapMessageDispatcherServlet.java:265) 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727) 	at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327) 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) 	at org.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.service(BirtSoapMessageDispatcherServlet.java:122) 	at org.eclipse.equinox.http.registry.internal.ServletManager$ServletWrapper.service(ServletManager.java:180) 	at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90) 	at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111) 	at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:59) 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) 	at org.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service(HttpServerManager.java:318) 	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502) 	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:380) 	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) 	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 	at org.mortbay.jetty.Server.handle(Server.java:324) 	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:535) 	at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:880) 	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:748) 	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:213) 	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:520) Caused by: org.eclipse.birt.data.engine.core.DataException: Unacceptable expression for the aggregation binding "TOTAL_COLUMN_0". Unacceptable expression for the aggregation binding "TOTAL_COLUMN_0". 	at org.eclipse.birt.data.engine.olap.util.OlapExpressionUtil.getAggrDefnsByNestBinding(OlapExpressionUtil.java:422) 	at org.eclipse.birt.data.engine.olap.impl.query.PreparedAddingNestAggregations.prepare(PreparedAddingNestAggregations.java:52) 	at org.eclipse.birt.data.engine.olap.query.view.BirtCubeView.prepareCubeOperations(BirtCubeView.java:119) 	at org.eclipse.birt.data.engine.olap.query.view.BirtCubeView.prepareCubeQuery(BirtCubeView.java:99) 	at org.eclipse.birt.data.engine.olap.query.view.BirtCubeView.<init>(BirtCubeView.java:85) 	at org.eclipse.birt.data.engine.olap.impl.query.CubeQueryResults.getCubeCursor(CubeQueryResults.java:92) 	at org.eclipse.birt.report.engine.data.dte.CubeResultSet.<init>(CubeResultSet.java:87) 	at org.eclipse.birt.report.engine.data.dte.DteDataEngine.doExecuteCube(DteDataEngine.java:211) 	at org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.execute(AbstractDataEngine.java:259) 	at org.eclipse.birt.report.engine.executor.ExecutorManager$ExecutorContext.executeQuery(ExecutorManager.java:422) 	... 61 more Caused by: org.eclipse.birt.data.engine.core.DataException: Unacceptable expression for the aggregation binding "TOTAL_COLUMN_0". 	at org.eclipse.birt.data.engine.olap.util.OlapExpressionUtil.getFullLevelsForRunningAggregation(OlapExpressionUtil.java:450) 	at org.eclipse.birt.data.engine.olap.util.OlapExpressionUtil.getAggrDefnsByNestBinding(OlapExpressionUtil.java:414) 	... 70 more