NPE in EngineContext.loadScript(...)

User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/532.0 (KHTML, like Gecko) Chrome/3.0.195.27 Safari/532.0 Build Identifier: 2.5.1.v20090916 The scriptContext attribute of EngineContext class is not properly initialized before calling loadScript method. The following code in EngineContext.loadScript (lines 1007-1008): ICompiledScript compiledScript = scriptContext.compile( language, 	fileName, 1, new String( script, "UTF-8" ) ); should be replaced with: ICompiledScript compiledScript = getScriptContext().compile( language, 	fileName, 1, new String( script, "UTF-8" ) ); In current version exception is thrown: java.lang.NullPointerException 	at org.eclipse.birt.report.engine.executor.ExecutionContext.loadScript(ExecutionContext.java:1007) 	at org.eclipse.birt.report.engine.api.impl.EngineTask.loadDesign(EngineTask.java:1578) 	at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:95) 	at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:75) Reproducible: Always Steps to Reproduce: 1. Create a report design which includes script: <report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.20" id="1"> ... <list-property name="includeScripts"> <property>someScript.js</property> </list-property> ... 2. Create IReportRunnable using this report design, create IRunAndRenderTask with this runnable, call run(): IReportEngine = ... IReportRunnable runnable = engine.openReportDesign(...); IRunAndRenderTask task = engine.createRunAndRenderTask(runnable); task.run(); Note: in some cases scriptContext might be initialized as a side-effect of some other method calls (e.g. task.setLocale(...)) which masks this bug.